(this["webpackJsonpncc-demo"]=this["webpackJsonpncc-demo"]||[]).push([[0],{195:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},243:function(e,t,n){},494:function(e,t,n){},496:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),i=n.n(r),c=n(25),o=n.n(c),s=n(32),l=n(33),u=n(36),d=n(35),p=n(9),h=n(5),b=n(89),j=n(43),m=n(72),f=n(514),O=n(508),g=n(516),x=n(507),v=n(511),y=n(502),w=n(182);function k(){var e=Object(p.a)(["\n    ","\n"]);return k=function(){return e},e}var _=w.a.linkColorStyles,S=Object(h.d)(b.b)(k(),_()),C=n.p+"static/media/annotate-14px.bd47b597.svg",M=(n.p,n.p,n.p,n.p,n.p+"static/media/add-14px.96cf0db9.svg"),N=n(17),D=n(509),I=n(49),A=n(124),P=(n(195),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={activeRow:null,activeCol:null,filterOpacity:0,showRowAt:void 0,showColAt:void 0,opacity:void 0,minFilterOpacity:0,maxFilterOpacity:1},a}return Object(l.a)(n,[{key:"handleMouseOver",value:function(e,t){this.setState({activeRow:e,activeCol:t})}},{key:"handleMouseOut",value:function(){this.setState({activeRow:null,activeCol:null})}},{key:"componentDidMount",value:function(){this.setOpacity(this.props)}},{key:"componentDidUpdate",value:function(e){this.props.data===e.data&&this.props.normalization===e.normalization||this.setOpacity(e)}},{key:"setOpacity",value:function(e){var t,n=this;if("log-global"===e.normalization){var a=e.data.map((function(e){return e.map((function(e){return Math.exp(e)}))})),r=a.reduce((function(e,t){return[].concat(Object(I.a)(t),Object(I.a)(e))}),[]).reduce((function(e,t){return e+t}),0);t=a.map((function(e){return e.map((function(e){return e/r}))}))}else if("log-per-row"===e.normalization){t=e.data.map((function(e){return e.map((function(e){return Math.exp(e)}))})).map((function(e){var t=e.reduce((function(e,t){return e+t}),0);return e.map((function(e){return e/t}))}))}else if("log-per-row-with-zero"===e.normalization){t=e.data.map((function(e){return e.map((function(e){return Math.exp(e)}))})).map((function(e){var t=e.reduce((function(e,t){return e+t}),0)+Math.exp(0);return e.map((function(e){return e/t}))}))}else if("linear"===e.normalization){var i=e.data.reduce((function(e,t){return[].concat(Object(I.a)(t),Object(I.a)(e))}),[]),c=Math.max.apply(Math,Object(I.a)(i)),o=Math.min.apply(Math,Object(I.a)(i));t=c===o?e.data:e.data.map((function(e){return e.map((function(e){return(e-o)/(c-o)}))}))}else t=e.data;var s=t.reduce((function(e,t){return[].concat(Object(I.a)(t),Object(I.a)(e))}),[]);this.setState({opacity:t,minFilterOpacity:Math.min.apply(Math,Object(I.a)(s)),maxFilterOpacity:Math.max.apply(Math,Object(I.a)(s))},(function(){return n.setShowRowsAndColumns(n.state)}))}},{key:"setShowRowsAndColumns",value:function(e){var t=this;if(e.opacity&&this.props.rowLabels&&this.props.colLabels){var n=this.props.rowLabels.map((function(n,a){return Math.max.apply(Math,Object(I.a)(e.opacity[a]))>=t.state.filterOpacity})),a=e.opacity[0].map((function(t,n){return e.opacity.map((function(e){return e[n]}))})),r=this.props.colLabels.map((function(e,n){return Math.max.apply(Math,Object(I.a)(a[n]))>=t.state.filterOpacity}));this.setState({showRowAt:n,showColAt:r})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.colLabels,i=t.rowLabels,c=t.color,o=void 0===c?"blue":c,s=this.state,l=s.activeRow,u=s.activeCol,d=s.showRowAt,p=s.showColAt,h=s.opacity,b={red:[255,50,50],green:[63,201,1],blue:[50,159,255]};return d&&p&&h?Object(a.jsxs)("div",{className:"heatmap-container",children:[this.props.includeSlider&&this.state.minFilterOpacity!==this.state.maxFilterOpacity&&Object(a.jsx)("div",{className:"slide_container",children:Object(a.jsx)("input",{type:"range",min:this.state.minFilterOpacity,max:this.state.maxFilterOpacity,step:"0.001",value:this.state.filterOpacity,className:"slider",onChange:function(t){return e.setState({filterOpacity:Number(t.target.value)},(function(){return e.setShowRowsAndColumns(e.state)}))}})}),Object(a.jsx)("div",{className:"heatmap-scroll",children:Object(a.jsx)("div",{className:"heatmap",children:Object(a.jsxs)("div",{className:"heatmap__ft",children:[Object(a.jsxs)("div",{className:"heatmap__tr",children:[Object(a.jsx)("div",{className:"heatmap__td heatmap__td--placeholder"}),Object(a.jsx)("div",{className:"heatmap__td",children:Object(a.jsx)("table",{className:"heatmap__col-labels",children:Object(a.jsx)("tbody",{children:Object(a.jsx)("tr",{"data-row":"header",children:r.map((function(t,n){return(e.props.showAllCols||e.state.showColAt[n])&&Object(a.jsx)("th",{className:"heatmap__label".concat(n===u?" heatmap__col-label-cursor":""),onMouseOver:function(){return e.handleMouseOver(null,n)},onMouseOut:function(){return e.handleMouseOut()},children:Object(a.jsx)("div",{className:"heatmap__label__outer",children:Object(a.jsx)("div",{className:"heatmap__label__inner",children:Object(a.jsx)("span",{children:t})})})},"".concat(t,"_").concat(n))}))})})})})]}),Object(a.jsxs)("div",{className:"heatmap__tr",children:[Object(a.jsx)("div",{className:"heatmap__td",children:Object(a.jsx)("table",{className:"heatmap__row-labels",children:Object(a.jsx)("tbody",{children:i.map((function(t,n){return e.state.showRowAt[n]&&Object(a.jsx)("tr",{className:"heatmap__row","data-row":n,children:Object(a.jsx)("th",{className:"heatmap__label".concat(n===l?" heatmap__row-label-cursor":""),onMouseOver:function(){return e.handleMouseOver(n,null)},onMouseOut:function(){return e.handleMouseOut()},children:Object(a.jsx)("div",{children:t})})},"".concat(t,"_").concat(n))}))})})}),Object(a.jsx)("div",{className:"heatmap__td heatmap__datagrid-container heatmap__datagrid-container--".concat(o),children:Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:i.map((function(t,n){return e.state.showRowAt[n]&&Object(a.jsx)("tr",{className:"heatmap__row","data-row":n,children:r.map((function(r,i){return(e.props.showAllCols||e.state.showColAt[i])&&Object(a.jsxs)("td",{className:"heatmap__cell",style:{backgroundColor:"rgba(".concat(b[o].join(","),",").concat(h[n][i],")")},"data-tip":"","data-for":"heatmap-tooltip",children:[n===l&&i===u||i===u&&0===n&&null===l?Object(a.jsx)("div",{className:"heatmap__col-cursor"}):null,n===l&&i===u||n===l&&0===i&&null===u?Object(a.jsx)("div",{className:"heatmap__row-cursor"}):null,Object(a.jsx)("div",{className:"heatmap__trigger".concat(n===l&&i===u?" heatmap__cursor":""),onMouseOver:function(){return e.handleMouseOver(n,i)},onMouseOut:function(){return e.handleMouseOut()}})]},"".concat(r,"_").concat(i,"_").concat(t,"_").concat(n))}))},"".concat(t,"_").concat(n))}))})})})]})]})})}),null!==l&&null!==u?Object(a.jsxs)(A.a,{id:"heatmap-tooltip",className:"heatmap-tooltip",place:"right",effect:"solid",delayHide:0,delayShow:0,delayUpdate:0,children:["".concat(n[l][u]),Object(a.jsxs)("span",{className:"heatmap-tooltip__meta",children:[Object(a.jsx)("strong",{children:"Row:"})," ",i[l]]}),Object(a.jsxs)("span",{className:"heatmap-tooltip__meta",children:[Object(a.jsx)("strong",{children:"Column:"})," ",r[u]]})]}):null]}):null}}]),n}(i.a.Component)),z=n(65),E=n(184),T=n(100),q=n(45),R=n(110),L=n.n(R),F=n(504),U=n(506),K=n(136),B=n.n(K);n(199),n(200),n(201);function W(){var e=Object(p.a)(["\n  background-color: ",";\n  width: 100%;\n  align-self: stretch;\n  display: block;\n"]);return W=function(){return e},e}function H(){var e=Object(p.a)(["\n  background: ",";\n"]);return H=function(){return e},e}var G=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.resultPane,r=t.outputState,i=function(e){return Object(a.jsx)("div",{className:"placeholder",children:Object(a.jsxs)("div",{className:"placeholder__content",children:[Object(a.jsx)("svg",{className:"placeholder__".concat(r),children:Object(a.jsx)("use",{xlinkHref:"#icon__".concat(r)})}),""!==e?Object(a.jsx)("p",{children:e}):null]})})};switch(r){case"working":e=i("");break;case"received":e=this.props.children;break;case"error":e=i("Something went wrong. Please try again.");break;default:e=i("Run model to view results")}return Object(a.jsxs)("div",{className:"pane__".concat(n," model__output ").concat("received"!==r?"model__output--empty":""),children:[Object(a.jsx)("div",{className:"pane__thumb"}),e]})}}]),n}(i.a.Component),J=(i.a.Component,function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.outputState;return Object(a.jsx)(G,{className:this.props.className,resultPane:"bottom",outputState:e,children:this.props.children})}}]),n}(i.a.Component)),X=Object(h.d)(J)(H(),(function(e){return e.theme.palette.common.white.hex})),V=(i.a.Component,function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:this.props.className,children:this.props.children})}}]),n}(i.a.Component)),Q=Object(h.d)(V)(W(),(function(e){return e.theme.palette.common.white.hex})),Y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={showFullDescription:!1},a}return Object(l.a)(n,[{key:"toggleShowMore",value:function(){this.setState({showFullDescription:!this.state.showFullDescription})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.description;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:Object(a.jsx)("span",{children:t})}),Object(a.jsx)("p",{children:Object(a.jsx)("span",{children:n})})]})}}]),n}(i.a.Component),$=n(510),Z=n(98),ee=n(83),te=n.n(ee);function ne(){var e=Object(p.a)(["\n    padding: ",";\n"]);return ne=function(){return e},e}function ae(){var e=Object(p.a)(["\n"]);return ae=function(){return e},e}function re(){var e=Object(p.a)(["\n    display: none;\n    position: absolute;\n    z-index: 1;\n    list-style-type: none;\n    padding: ",";\n    margin: ",";\n    width: auto;\n    clear: both;\n"]);return re=function(){return e},e}function ie(){var e=Object(p.a)(["\n    cursor: default;\n    color: #232323;\n"]);return ie=function(){return e},e}function ce(){var e=Object(p.a)(["\n    cursor: pointer;\n"]);return ce=function(){return e},e}function oe(){var e=Object(p.a)(["\n    :hover {\n        background-color: blue;\n    }\n\n    :hover .predicted-action {\n        color: white;\n    }\n\n    :hover ul {\n        display: table;\n        background-color: #f9f9f9;\n        font-size: 1.0em;\n        border: ",";\n    }\n"]);return oe=function(){return e},e}function se(){var e=Object(p.a)(["\n    background-color: lightgray;\n    color: white;\n\n    :hover a {\n        color: black;\n    }\n"]);return se=function(){return e},e}function le(){var e=Object(p.a)(["\n    display: inline-block;\n    font-size: 1em;\n    position: relative;\n    display: inline-block;\n    border: ",";\n"]);return le=function(){return e},e}function ue(){var e=Object(p.a)(["\n    font-size: 0.5em;\n"]);return ue=function(){return e},e}var de=function(e){var t=e.action,n=e.unchoose,r=e.idx;return Object(a.jsxs)(me,{children:[Object(a.jsx)(ge,{children:t}),Object(a.jsx)(Oe,{role:"img","aria-label":"x",onClick:n,children:"\u274c"})]},"".concat(r,"-").concat(t))},pe=function(e){var t=e.predictedAction,n=e.choices,r=e.choose,i=e.idx,c=n.map((function(e,t){var n=Object(z.a)(e,2),c=n[0],o=n[1];return Object(a.jsx)(ve,{onClick:function(){return r(o)},children:Object(a.jsxs)(ye,{children:[c.toFixed(3)," ",o]})},"".concat(i,"-").concat(o))}));return Object(a.jsxs)(fe,{className:"choice-dropdown",children:[Object(a.jsx)(ge,{children:t}),Object(a.jsx)(xe,{children:c})]},i)},he=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(s.a)(this,n),a=t.call(this,e);var r=e.inputState,i=r&&r.initial_sequence||[];return a.state={initialSequence:i},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.initialSequence,t=this.props,n=t.bestActionSequence,r=t.choices,i=t.runSequenceModel,c=function(t){return function(){i({initial_sequence:e.slice(0,t)})}},o=function(t){return function(a){for(var r=e.slice(0,t);r.length<t;)r.push(n[r.length]);r.push(a),i({initial_sequence:r})}};if(r){var s=n.map((function(t,n){if(n<e.length)return Object(a.jsx)(de,{action:t,unchoose:c(n)},n);var i=r[n];return i.sort((function(e,t){return t[0]-e[0]})),Object(a.jsx)(pe,{predictedAction:t,choices:i,choose:o(n)},n)}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Interactive Beam Search"}),Object(a.jsx)(be,{children:s})]})}return null}}]),n}(i.a.Component),be=h.d.ul(ue()),je=h.d.li(le(),(function(e){var t=e.theme;return"1px solid ".concat(t.palette.border.main)})),me=Object(h.d)(je)(se()),fe=Object(h.d)(je)(oe(),(function(e){var t=e.theme;return"1px solid ".concat(t.palette.common.black)})),Oe=h.d.span(ce()),ge=h.d.a(ie()),xe=h.d.ul(re(),(function(e){return e.theme.spacing.xxs}),(function(e){return e.theme.spacing.xxs})),ve=h.d.li(ae()),ye=h.d.a(ne(),(function(e){return e.theme.spacing.xxs})),we=he,ke=n(105),_e=n.n(ke),Se=n(137),Ce=n(183),Me=n(505),Ne=n(517),De=n(518);function Ie(){var e=Object(p.a)(["\n    max-height: ",";\n    max-width: ",";\n    padding: ",";\n"]);return Ie=function(){return e},e}function Ae(){var e=Object(p.a)(["\n    padding: ",";\n"]);return Ae=function(){return e},e}function Pe(){var e=Object(p.a)(["\n    &&& {\n        .ant-upload-drag {\n            height: 260px;\n        }\n        .ant-upload-btn {\n            padding: 0;\n        }\n    }\n"]);return Pe=function(){return e},e}var ze=function(e){var t=Object(r.useState)({}),n=Object(z.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(!1),l=Object(z.a)(s,2),u=l[0],d=l[1];Object(r.useEffect)((function(){e.modelParams.imgSrc&&e.modelParams.imgSrc!==c.imgSrc&&function(e){p.apply(this,arguments)}(e.modelParams.imgSrc)}),[e.modelParams.imgSrc]);function p(){return(p=Object(Se.a)(_e.a.mark((function e(t){var n,a,r,i;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),n={imgSrc:t,imageName:void 0,image:void 0},!t){e.next=13;break}return e.next=5,fetch(t);case 5:return a=e.sent,e.next=8,a.blob();case 8:r=e.sent,(i=r).lastModifiedDate=new Date,i.name=t,n={imgSrc:t,imageName:i.name,image:i};case 13:h(n),b(!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(t){var n=Object(N.a)(Object(N.a)({},c),t);o(n),e.onChange(n)},b=function(e){d(e)};return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)("div",{title:"Upload an Image",children:Object(a.jsxs)(Te,{onChange:function(e){if("done"===e.file.status){var t=e.file.originFileObj;t&&function(e,t,n,a){e.size>t?Ee({file:e,maxFileBytes:t,onSuccess:n,onError:a}):n(e)}(t,1048576,(function(e){h({imgSrc:URL.createObjectURL(e),imageName:e.name,image:e}),b(!1)}),(function(){Ce.b.error("".concat(e.file.name," file upload failed: ").concat(e.file.error.message)),h({imgSrc:void 0,imageName:void 0,image:void 0}),b(!1)}))}else if("error"===e.file.status){var n=5242880;e.file.error.message.match("^cannot post .* 413'$")&&e.file.size>n?Ce.b.error("".concat(e.file.name," file is too large; must be smaller than ").concat(n," bytes")):Ce.b.error("".concat(e.file.name," file upload failed: ").concat(e.file.error.message)),h({imgSrc:void 0,imageName:void 0,image:void 0}),b(!1)}},showUploadList:!1,action:"api/permalink/noop",beforeUpload:function(e){var t="image/bmp"===e.type||"image/gif"===e.type||"image/png"===e.type||"image/jpeg"===e.type||"image/tiff"===e.type;return t?b(!0):Ce.b.error("You can only upload JPG/PNG/BMP/GIF/TIFF files"),t},children:[u?Object(a.jsxs)(qe,{children:[Object(a.jsx)(Ne.a,{})," Loading..."]}):null,!u&&c.imgSrc?Object(a.jsx)(Re,{src:c.imgSrc}):null,u||c.imgSrc?null:Object(a.jsxs)(qe,{children:[Object(a.jsx)(De.a,{})," Upload an Image"]})]})})})},Ee=function(e){var t=e.file,a=e.maxFileBytes,r=e.newFileName,i=e.onSuccess,c=e.onError,o=n(222).basename(t.name),s=r||"".concat(o,"_c.jpg"),l=a/3,u=new FileReader;u.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){var e=document.createElement("canvas"),n=t.width*t.height,a=Math.sqrt(l)/Math.sqrt(n);e.width=t.width*a,e.height=t.height*a;var r=e.getContext("2d");r?(r.drawImage(t,0,0,e.width,e.height),r.canvas.toBlob((function(e){var t=new File([e],s,{type:"image/jpeg",lastModified:Date.now()});i(t)}),"image/jpeg",1)):c&&c("Invalid context")},u.onerror=function(e){console.log(e),c&&c("Error compressing image.")}},u.readAsDataURL(t)},Te=Object(h.d)(Me.a.Dragger)(Pe()),qe=h.d.div(Ae(),(function(e){var t=e.theme;return"".concat(t.spacing.md," 0")})),Re=h.d.img(Ie(),(function(e){var t=e.theme;return"calc(267px - ".concat(t.spacing.xxs," - ").concat(t.spacing.xxs,")")}),(function(e){var t=e.theme;return"calc(100% - ".concat(t.spacing.xxs," - ").concat(t.spacing.xxs,")")}),(function(e){return e.theme.spacing.xxs}));function Le(){return(Le=Object(Se.a)(_e.a.mark((function e(t){return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new FileReader;a.onloadend=function(){var t=a.result;e(t.substr(t.indexOf(",")+1))},a.onerror=n,a.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(){var e=Object(p.a)(["\n  background-color: transparent;\n  color: white;\n  padding: 1px;\n  margin: 1px;\n  display: inline-block;\n  border-radius: 3px;\n"]);return Fe=function(){return e},e}function Ue(){var e=Object(p.a)(['\n  background-color: "transparent";\n  padding: 1px;\n  margin: 1px;\n  display: inline-block;\n  border-radius: 3px;\n  font-weight: normal;\n']);return Ue=function(){return e},e}function Ke(){var e=Object(p.a)(["\n  background-color: #26BD19;\n  padding: 1px;\n  margin: 1px;\n  display: inline-block;\n  border-radius: 3px;\n  font-weight: normal;\n"]);return Ke=function(){return e},e}function Be(){var e=Object(p.a)(["\n  background-color: #FF5733;\n  padding: 1px;\n  margin: 1px;\n  display: inline-block;\n  border-radius: 3px;\n  font-weight: normal;\n"]);return Be=function(){return e},e}function We(){var e=Object(p.a)(["\n  background-color: ",";\n  padding: 1px;\n  margin: 1px;\n  display: inline-block;\n  border-radius: 3px;\n  font-weight: normal;\n"]);return We=function(){return e},e}function He(){var e=Object(p.a)(["\n  && {\n    &,\n    span {\n      text-rendering: geometricPrecision;\n      font-size: ",";\n      color: ",";\n      line-height:  ",";\n    }\n  }\n"]);return He=function(){return e},e}var Ge=Object(h.d)(A.a)(He(),(function(e){return e.theme.typography.bodySmall.fontSize}),(function(e){return e.theme.typography.bodySmall.contrastColor}),(function(e){return e.theme.typography.bodySmall.lineHeight})),Je=h.d.span(We(),(function(e){return e.backgroundColor})),Xe=h.d.span(Be()),Ve=h.d.span(Ke()),Qe=h.d.span(Ue()),Ye=(h.d.span(Fe()),n(243),n(513));function $e(){var e=Object(p.a)(["\n  ","\n"]);return $e=function(){return e},e}function Ze(){var e=Object(p.a)(["\n  ","\n"]);return Ze=function(){return e},e}function et(){var e=Object(p.a)(["\n  && {\n    ","\n\n    resize: vertical;\n    min-height: 5.4em;\n\n    @media (max-height: ",") {\n      min-height: 4.4em;\n    }\n  }\n"]);return et=function(){return e},e}function tt(){var e=Object(p.a)(["\n  width: 100%;\n  margin-top: ",";\n  display: block;\n  transition: min-height .2s ease, opacity .2s ease;\n\n  &:focus {\n    outline: 0;\n    box-shadow: 0 0 "," ",";\n  }\n\n  @media (max-height: ",") {\n    margin-top: ",";\n  }\n"]);return tt=function(){return e},e}function nt(){var e=Object(p.a)(["\n  display: block;\n  font-weight: ",";\n  margin-top: ",";\n  transition: font-size .2s ease;\n"]);return nt=function(){return e},e}function at(){var e=Object(p.a)(["\n  margin-top: ",";\n  transition: margin .2s ease;\n\n  @media (max-height: ",") {\n    margin-top: ",";\n  }\n"]);return at=function(){return e},e}var rt=h.d.div(at(),(function(e){return e.theme.spacing.md}),(function(e){return e.theme.breakpoints.md}),(function(e){return e.theme.spacing.xs})),it=h.d.label(nt(),(function(e){return e.theme.typography.bodyBold.fontWeight}),(function(e){return e.theme.spacing.xs})),ct=Object(h.c)(tt(),(function(e){return e.theme.spacing.xs}),(function(e){return e.theme.spacing.md}),(function(e){return e.theme.palette.primary}),(function(e){return e.theme.breakpoints.md}),(function(e){return e.theme.spacing.xxs})),ot=Object(h.d)(Ye.a.TextArea)(et(),ct,(function(e){return e.theme.breakpoints.md})),st=Object(h.d)(Ye.a)(Ze(),ct),lt=Object(h.d)(F.a)($e(),ct);function ut(){var e=Object(p.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  margin-top: ",";\n  svg {\n    fill: ",";\n  }\n"]);return ut=function(){return e},e}function dt(){var e=Object(p.a)(["\n  display: grid;\n  margin: ",";\n  transition: margin .2s ease;\n  grid-template-columns: auto 1fr;\n  gap: ",";\n  align-items: center;\n\n  span {\n    color: ",";\n  }\n\n  @media screen and (max-height: ",") {\n    margin: ",";\n  }\n  @media screen and (max-width: ",") {\n    grid-template-columns: auto;\n  }\n"]);return dt=function(){return e},e}var pt=/\W/,ht=/\w/,bt="\u2026",jt="@@",mt="DEFAULT_OPTION_GROUP",ft="model-tooltip",Ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;if("number"!==typeof t)throw new Error("limit must be a number");if(t-=bt.length,e.length>t){for(;t>1&&(!ht.test(e[t-1])||!pt.test(e[t]));)t-=1;return 1===t?e:e.substring(0,t)+bt}return e},gt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;if(e.snippet)return e.snippet;var a=t[0].name,r=e[a];return Ot(r,n)},xt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(s.a)(this,n),a=t.call(this,e);var r=e.examples,i=e.fields,c=e.inputState,o=e.runModel;return Array.isArray(r[0])?a.normalizedExamples=r:a.normalizedExamples=[[mt,r]],a.state=c?Object(N.a)({},c):{},a.handleExampleChange=function(e){if("-1"!==e){var t=function(e){var t=e.split(jt);return{groupIndex:t.length?t[0]:void 0,exampleIndex:t.length>0?t[1]:void 0}}(e),n=t.groupIndex,r=t.exampleIndex,c=a.normalizedExamples[n][1][r],o={};i.forEach((function(e){var t=e.name;void 0!==c[t]&&(o[t]=c[t])})),a.setState(o)}},a.handleInputChange=function(e){return function(t){var n={};n[e]=t.target.value,a.setState(n)}},a.handleSelectChange=function(e){return function(t){var n={};n[e]=t,a.setState(n)}},a.handleRadioChange=function(e){return function(t){var n={};n[e]=t.target.value,a.setState(n)}},a.runOnEnter=function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),o(a.cleanInputs()))},a.cleanInputs=function(){var e=Object(N.a)({},a.state);return i.forEach((function(t){(t.dependentInputs||[]).forEach((function(t){delete e[t]}))})),e},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.fields,r=t.selectedModel,c=t.outputState,o=t.responseData,s=t.inputState,l=t.exampleLabel,u=n.every((function(t){return t.optional||e.state[t.name]})),d=[],p=[];return n.forEach((function(t,n){var i="input--".concat(r,"-").concat(t.name),l=t.label?Object(a.jsx)(it,{htmlFor:"#".concat(i),children:t.label}):null,h=null;switch(t.type){case"IMAGE_UPLOAD":h=Object(a.jsx)(ze,{onChange:function(n){(function(e){return Le.apply(this,arguments)})(n.image).then((function(a){n.image_base64=a;var r={};r[t.name]=n,e.setState(r)})).catch((function(e){return console.log(e)}))},modelParams:e.state[t.name]||{}});break;case"TEXT_AREA":case"TEXT_INPUT":var b={onChange:e.handleInputChange(t.name),onKeyDown:u?e.runOnEnter:void 0,id:i,type:"text",required:!0,autoFocus:0===n,placeholder:t.placeholder||"",value:e.state[t.name],disabled:"working"===c,maxLength:t.maxLength||("TEXT_INPUT"===t.type?1e3:1e5)};h="TEXT_AREA"===t.type?Object(a.jsx)(ot,Object(N.a)({},b)):Object(a.jsx)(st,Object(N.a)({},b));break;case"SELECT":h=Object(a.jsx)(lt,{value:e.state[t.name]||t.options[0],onChange:e.handleSelectChange(t.name),dropdownMatchSelectWidth:!1,disabled:"working"===c,children:t.options.map((function(e){return Object(a.jsx)(F.a.Option,{value:e,children:e},e)}))});break;case"BEAM_SEARCH":if("working"!==c){var j=o||{},m=j.best_action_sequence,f=j.choices;h=Object(a.jsx)(we,{inputState:s,bestActionSequence:m,choices:f,runSequenceModel:function(t){return e.props.runModel(Object(N.a)(Object(N.a)({},e.state),t),!0)}})}break;case"RADIO":h=Object(a.jsx)($.a.Group,{vertical:!0,name:i,value:e.state[t.name]||t.options[0]&&t.options[0].name,onChange:e.handleRadioChange(t.name),disabled:"working"===c,children:t.options.map((function(e){return Object(a.jsx)($.a,{value:e.name,children:Object(a.jsxs)("span",{"data-tip":e.desc,"data-for":ft,children:[" ",e.name," "]})},e.name)}))});break;default:console.error("unknown field type: "+t.type)}var O=Object(a.jsxs)(rt,{children:[l,h]},t.name);t.inputOutput?p.push(O):d.push(O)})),Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(vt,{children:[Object(a.jsx)("span",{children:l||"Enter text or"}),Object(a.jsxs)(F.a,{dropdownMatchSelectWidth:!1,disabled:"working"===c,onChange:this.handleExampleChange,defaultValue:"-1",children:[Object(a.jsx)(F.a.Option,{value:"-1",children:"Choose an example..."}),this.normalizedExamples.map((function(e,t){return function(e,t,n){var r=e[0],i=e[1];return r&&r!==mt?Object(a.jsx)(F.a.OptGroup,{label:r,children:wt(i,t,n)},t):wt(i,t,n)}(e,t,n)}))]})]}),d,Object(a.jsx)(yt,{children:Object(a.jsxs)(Z.a,{type:"primary",disabled:!u||"working"===c,onClick:function(){return e.props.runModel(e.cleanInputs())},children:["Run",Object(a.jsx)(te.a,{})]})}),p,Object(a.jsx)(Ge,{multiline:!0,id:ft})]})}}]),n}(i.a.Component),vt=h.d.div(dt(),(function(e){var t=e.theme;return"".concat(t.spacing.md," 0 ").concat(t.spacing.md)}),(function(e){return e.theme.spacing.xs}),(function(e){return e.theme.palette.text.secondary}),(function(e){return e.theme.breakpoints.md}),(function(e){var t=e.theme;return"".concat(t.spacing.xs," 0 ").concat(t.spacing.xs)}),(function(e){return e.theme.breakpoints.sm})),yt=h.d.div(ut(),(function(e){return e.theme.spacing.md}),(function(e){return e.theme.palette.common.white.hex}));function wt(e,t,n){return e.map((function(e,r){var i=function(e,t){return e+jt+t}(t,r);return Object(a.jsx)(F.a.Option,{value:i,children:gt(e,n)},i)}))}function kt(){var e=Object(p.a)(["\n    margin: ",";\n"]);return kt=function(){return e},e}var _t=h.d.div(kt(),(function(e){var t=e.theme;return"".concat(t.spacing.md," 0 ").concat(t.spacing.lg)}));function St(){var e=Object(p.a)(["\n    margin: 0 0 ",";\n"]);return St=function(){return e},e}var Ct=Object(h.d)(it)(St(),(function(e){return e.theme.spacing.xs}));function Mt(){var e=Object(p.a)(["\n    padding: ",";\n    border: 1px solid ",";\n    margin: ",";\n\n    pre {\n        margin: 0;\n    }\n"]);return Mt=function(){return e},e}var Nt=h.d.div(Mt(),(function(e){return e.theme.spacing.sm}),(function(e){return e.theme.palette.border.main}),(function(e){var t=e.theme;return"".concat(t.spacing.sm," 0 ").concat(t.spacing.md)})),Dt=n(512),It=n(501),At=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.language,n=e.children;return Object(a.jsx)(Dt.a,{language:t,style:It.a,customStyle:{background:"transparent",padding:"0"},children:n})}}]),n}(i.a.Component),Pt=function(e){return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(_t,{children:[Object(a.jsx)(Ct,{children:"Installing AllenNLP"}),e.installNote?Object(a.jsx)("p",{children:e.installNote}):null,e.installCommand?Object(a.jsx)(Nt,{children:Object(a.jsx)(At,{language:"bash",children:e.installCommand})}):null,Object(a.jsx)(Ct,{children:"Prediction"}),Object(a.jsx)("strong",{children:"On the command line (bash):"}),e.bashNote?Object(a.jsx)("p",{children:e.bashNote}):null,e.bashCommand?Object(a.jsx)(Nt,{children:Object(a.jsx)(At,{language:"bash",children:e.bashCommand})}):null,Object(a.jsx)("strong",{children:"As a library (Python):"}),e.pythonNote?Object(a.jsx)("p",{children:e.pythonNote}):null,e.pythonCommand?Object(a.jsx)(Nt,{children:Object(a.jsx)(At,{language:"python",children:e.pythonCommand})}):null]}),Object(a.jsxs)(_t,{children:[Object(a.jsx)(Ct,{children:"Evaluation"}),e.evaluationNote?Object(a.jsx)("p",{children:e.evaluationNote}):null,e.evaluationCommand?Object(a.jsx)(Nt,{children:Object(a.jsx)(At,{language:"python",children:e.evaluationCommand})}):null]}),Object(a.jsxs)(_t,{children:[Object(a.jsx)(Ct,{children:"Training"}),e.trainingNote?Object(a.jsx)("p",{children:e.trainingNote}):null,e.trainingCommand?Object(a.jsx)(Nt,{children:Object(a.jsx)(At,{language:"python",children:e.trainingCommand})}):null]})]})};function zt(){var e=Object(p.a)(["\n  background: ",";\n  display: block;\n  width: 100%;\n  max-width: ",";\n"]);return zt=function(){return e},e}function Et(){var e=Object(p.a)(["\n  max-width: ",";\n  white-space: break-spaces;\n"]);return Et=function(){return e},e}function Tt(){var e=Object(p.a)(["\n  margin-bottom: ",";\n"]);return Tt=function(){return e},e}var qt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).interpretModel=function(e,t){return function(){var n=a.props.apiUrlInterpret;return fetch(n(e,t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Object(N.a)(Object(N.a)({},e),{interpreter:t}))}).then((function(e){return e.json()})).then((function(e){var n=Object(N.a)({},a.state);n.interpretData=Object(N.a)(Object(N.a)({},n.interpretData),{},Object(T.a)({},t,e)),a.setState(n)}))}},a.attackModel=function(e,t,n,r){return function(i){var c=i.target,o=Object(N.a)(Object(N.a)(Object(N.a)({},{attacker:t}),{inputToAttack:n}),{gradInput:r});void 0!==c&&(o.target=c);var s=(0,a.props.apiUrlAttack)(e,t),l={inputs:e,input_field_to_attack:n,grad_input_field:r};return fetch(s,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){var n=Object(N.a)({},a.state);n.attackData=Object(N.a)(Object(N.a)({},n.attackData),{},Object(T.a)({},t,e)),a.setState(n)}))}},a.handleSubModelChange=function(e){a.setState({selectedSubModel:e})};var r=e.requestData,i=e.responseData,c=e.interpretData,o=e.attackData;return a.state={outputState:i?"received":"empty",requestData:r,responseData:i,interpretData:c,attackData:o,selectedSubModel:r?r.model:void 0},a.runModel=a.runModel.bind(Object(q.a)(a)),a.interpretModel=a.interpretModel.bind(Object(q.a)(a)),a.attackModel=a.attackModel.bind(Object(q.a)(a)),a}return Object(l.a)(n,[{key:"runModel",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.props,r=a.selectedModel,i=a.apiUrl;this.setState({outputState:"working",interpretData:void 0,attackData:void 0});e.model;var c,o=Object(E.a)(e,["model"]),s=Object(N.a)({model:this.state.selectedSubModel},o);if(n){var l=new URL(i(s),window.location.origin),u=Object(N.a)(Object(N.a)({},B.a.parse(l.search)),{},{record:!1});l.search=B.a.stringify(u),c=l.toString()}else c=i(s);fetch(c,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){if(200!==e.status)throw Error("Predict call failed.");return e.json()})).then((function(e){if(t.props.updateData(s,e),t.setState({outputState:"received"}),!n){var a=new URL(c,window.location.origin).pathname.split("/")[2];if(!a)throw new Error("Malformed model endpoint url: ".concat(c));var i=JSON.stringify({task_name:r,model_id:a,request_data:s});fetch("/api/permalink/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:i}).then((function(e){return e.json()})).then((function(e){var n="/".concat(r,"/").concat(e);t.props.history.push(n)}))}})).catch((function(e){t.setState({outputState:"error"}),console.error(e)}))}},{key:"componentDidMount",value:function(){this.state.requestData&&!this.state.responseData&&this.runModel(this.state.requestData,!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.description,i=t.examples,c=t.fields,o=t.selectedModel,s=t.Output,l=t.requestData,u=t.responseData,d=t.defaultUsage,p=t.exampleLabel,h=this.state.outputState,b=L.a.partition(c,["name","model"]),j=Object(z.a)(b,2),m=Object(z.a)(j[0],1)[0],f=j[1],O=Object(a.jsx)(xt,{selectedModel:o,examples:i,fields:f,inputState:l,responseData:u,outputState:h,runModel:this.runModel,exampleLabel:p}),g=Object(N.a)(Object(N.a)({},this.state),{},{requestData:l,responseData:u}),v=l&&u?Object(a.jsx)(s,Object(N.a)(Object(N.a)({},g),{},{interpretModel:this.interpretModel,attackModel:this.attackModel})):null,y=d,w="";if(m){var k=m.options.filter((function(t){return t.modelId===(e.state.selectedSubModel||m.options[0].modelId)}));k.length&&(y=k[0].usage||d,w=k[0].desc)}var _=[O,y].filter((function(e){return void 0!==e}));return Object(a.jsxs)(Ft,{className:"pane__horizontal model",children:[Object(a.jsx)(Q,{children:Object(a.jsxs)("div",{className:"model__content",children:[Object(a.jsx)(Y,{title:n,description:r}),m?Object(a.jsxs)(rt,{children:[Object(a.jsx)(it,{children:"Model"}),Object(a.jsx)(lt,{value:this.state.selectedSubModel||m.options[0].modelId,onChange:this.handleSubModelChange,dropdownMatchSelectWidth:!1,disabled:"working"===h,optionLabelProp:"label",listHeight:370,children:m.options.map((function(e){return Object(a.jsx)(F.a.Option,{value:e.modelId,label:e.name,children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x.a.BodyBold,{children:e.name}),Object(a.jsx)(Lt,{children:e.desc})]})},e.modelId)}))}),Object(a.jsx)(Rt,{children:w})]}):null,_.length>1?Object(a.jsxs)(U.a,{defaultActiveKey:"demo",animated:!1,children:[Object(a.jsx)(U.a.TabPane,{tab:"Demo",children:O},"demo"),Object(a.jsx)(U.a.TabPane,{tab:"Usage",children:Object(a.jsx)(Pt,Object(N.a)({},y))},"usage")]}):O]})}),Object(a.jsx)(X,{outputState:h,children:v})]})}}]),n}(i.a.Component),Rt=h.d.p(Tt(),(function(e){return e.theme.spacing.md})),Lt=h.d.div(Et(),(function(e){return e.theme.breakpoints.md})),Ft=h.d.div(zt(),(function(e){return e.theme.palette.background.light}),(function(e){return e.theme.breakpoints.xl})),Ut=qt,Kt=function(e){var t=e.label,n=e.classes,r=e.children,i=e.suppressSummary,c=(t&&!i?"model__content__summary ":"")+(n||"");return Object(a.jsxs)(rt,{children:[t?Object(a.jsx)(it,{children:t}):null,c?Object(a.jsx)("div",{className:c,children:r}):r]})};function Bt(){var e=Object(p.a)(["\n  margin-bottom: ",";\n"]);return Bt=function(){return e},e}var Wt=Object(a.jsx)("span",{children:Object(a.jsx)("span",{children:"Code summarization is the task of summarizing code snippets with natural language descriptions. more description..."})}),Ht=function(e){return'echo \'{"code": "def addition(a, b):\\n\\treturn a+b"}\' | \\\nallennlp predict '.concat(e," -")},Gt=function(e){return'from allennlp.predictors.predictor import Predictor\nimport allennlp_models.rc\npredictor = Predictor.from_path("'.concat(e,'")\npredictor.predict(\n  passage="The Matrix is a 1999 science fiction action film written and directed by The Wachowskis, starring Keanu Reeves, Laurence Fishburne, Carrie-Anne Moss, Hugo Weaving, and Joe Pantoliano.",\n  question="Who stars in The Matrix?"\n)')},Jt=function(e,t){var n="https://storage.googleapis.com/allennlp-public-models/".concat(e),a="https://raw.githubusercontent.com/allenai/allennlp-models/v1.0.0/training_config/rc/".concat(t);return{installCommand:"pip install ncc==0.1.0",bashCommand:Ht(n),pythonCommand:Gt(n),evaluationCommand:"allennlp evaluate \\\n    ".concat(n," \\\n    https://s3-us-west-2.amazonaws.com/allennlp/datasets/squad/squad-dev-v1.1.json"),trainingCommand:"allennlp train ".concat(a," -s output_path")}},Xt=[{name:"code",label:"Code",type:"TEXT_INPUT",placeholder:'E.g. "def addition(a, b):\\n\\treturn a+b"'},{name:"model",label:"Model",type:"RADIO",options:[{name:"Seq2Seq",desc:Object(a.jsxs)("span",{children:["This model is the baseline model described in ",Object(a.jsx)("a",{href:"https://arxiv.org/pdf/1409.3215.pdf",children:"Sequence to Sequence Learning with Neural Networks"}),". It uses a RNN based encoder as well as a RNN based encoder for text generation task."]}),modelId:"code-summarization-seq2seq",usage:Jt("fine-grained-ner.2020-06-24.tar.gz")},{name:"transformer",desc:Object(a.jsxs)("span",{children:["Transformer, proposed in ",Object(a.jsx)("a",{href:"https://arxiv.org/abs/1603.01360",children:"Attention Is All You Need"}),", employs self-attention for neural machine translation task ."]}),modelId:"code-summarization-transformer",usage:Jt("fine-grained-ner.2020-06-24.tar.gz")}],optional:!0}],Vt=function(e){var t=e.action,n=e.tokenized_utterance,r=t.utterance_attention.map((function(e){return[e]})),i=t.considered_actions,c=t.action_probabilities.map((function(e){return[e]})),o=Object(a.jsx)("div",{className:"heatmap, heatmap-tile",children:Object(a.jsx)(P,{colLabels:["Prob"],rowLabels:i,data:c})}),s=r.length>0?Object(a.jsx)("div",{className:"heatmap, heatmap-tile",children:Object(a.jsx)(P,{colLabels:["Prob"],rowLabels:n,data:r})}):"";return Object(a.jsxs)("div",{className:"flex-container",children:[o,s]})},Qt=h.d.div(Bt(),(function(e){return e.theme.spacing.sm})),Yt={apiUrl:function(){return"/api/atis-parser/predict"},title:"Code Summarization",description:Wt,fields:Xt,examples:[{code:"def addition(a, b):\\n\\treturn a+b"},{code:"def addition(a, b):\\n\\treturn a+b"},{code:"def addition(a, b):\\n\\treturn a+b"}],Output:function(e){var t,n,r=e.responseData,i=r.predicted_actions,c=r.entities,o=r.linking_scores,s=r.predicted_sql_query,l=r.tokenized_utterance;return s.length>1?(t=Object(a.jsx)(At,{children:s}),n=Object(a.jsx)(Kt,{label:"Model internals",children:Object(a.jsxs)(D.a,{defaultActiveKey:["default"],children:[Object(a.jsxs)(D.a.Panel,{header:"Predicted production rules",children:[Object(a.jsx)(Qt,{children:"The sequence of grammar production rules predicted by the model, which together determine an abstract syntax tree for the program shown above."}),i.map((function(e,t){return Object(a.jsx)(D.a,{children:Object(a.jsx)(D.a.Panel,{header:e.predicted_action,children:Object(a.jsx)(Vt,{action:e,tokenized_utterance:l})})},"action_"+t)}))]},"default"),Object(a.jsx)(D.a.Panel,{header:"Entity linking scores",children:Object(a.jsx)(P,{colLabels:l,rowLabels:c,data:o})})]})})):(t=Object(a.jsx)("p",{children:"No query found!"}),n=null),Object(a.jsxs)("div",{className:"model__content answer",children:[Object(a.jsx)(Kt,{label:"SQL Query",suppressSummary:!0,children:t}),n]})}},$t=Object(j.g)((function(e){return Object(a.jsx)(Ut,Object(N.a)(Object(N.a)({},e),Yt))})),Zt=n(177),en=n.n(Zt),tn=(n(515),"simple_gradient"),nn="integrated_gradient",an="smooth_gradient";function rn(){var e=Object(p.a)(["\n    ","\n    padding-left: ",";\n    font-style: italic;\n"]);return rn=function(){return e},e}function cn(){var e=Object(p.a)(["\n  .ant-popover{\n    max-width: 70%;\n  }\n"]);return cn=function(){return e},e}var on="saliency-tooltip",sn=function(e,t){return t.map((function(t,n){return{token:t,weight:1-e[n]}}))},ln=(Object(h.b)(cn()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).callInterpretModel=function(e){return function(){a.setState(Object(N.a)(Object(N.a)({},a.state),{},{loading:!0})),e().then((function(){return a.setState({loading:!1})}))}},a.handleInputTopKChange=function(e){return function(t){var n=Object.assign({},a.state);""===t.target.value.trim()?n.topK[e]=t.target.value:n.topK[e]=parseInt(t.target.value,10),a.setState(n)}},a.state={topK:{all:3},loading:!1},a.callInterpretModel=a.callInterpretModel.bind(Object(q.a)(a)),a.colorize=a.colorize.bind(Object(q.a)(a)),a.handleInputTopKChange=a.handleInputTopKChange.bind(Object(q.a)(a)),a.getTopKIndices=a.getTopKIndices.bind(Object(q.a)(a)),a}return Object(l.a)(n,[{key:"colorize",value:function(e,t){var n=this.props.colormapProps;n.nshades=Math.min(Math.max(n.nshades,6),72);var r=en()(n),i=[];return e.forEach((function(e,c){i.push(Object(a.jsx)("label",{"data-tip":(1-e.weight).toFixed(3),style:{display:"inline-block"},"data-for":on,children:Object(a.jsx)(Je,{backgroundColor:t.has(c)?r[Math.round(e.weight*(n.nshades-1))]:"transparent",children:e.token},c)},c))})),i}},{key:"getTopKIndices",value:function(e,t){var n=e.map((function(e,t){return Object(N.a)(Object(N.a)({},e),{idx:t})}));n.sort((function(e,t){return e.weight-t.weight}));var a=t in this.state.topK?this.state.topK[t]:this.state.topK.all;return n.slice(0,a).map((function(e){return e.idx}))}},{key:"render",value:function(){var e=this.props,t=e.interpretData,n=e.inputTokens,r=e.inputHeaders,i=e.interpretModel,c=function(e){var t="";return e===tn?t=Object(a.jsxs)("p",{children:[" See saliency map interpretations generated by ",Object(a.jsx)("a",{href:"https://arxiv.org/abs/1312.6034",target:"_blank",rel:"noopener noreferrer",children:"visualizing the gradient"}),". "]}):e===nn?t=Object(a.jsxs)("p",{children:[" See saliency map interpretations generated using ",Object(a.jsx)("a",{href:"https://arxiv.org/abs/1703.01365",target:"_blank",rel:"noopener noreferrer",children:"Integrated Gradients"}),"."]}):e===an&&(t=Object(a.jsxs)("p",{children:[" See saliency map interpretations generated using ",Object(a.jsx)("a",{href:"https://arxiv.org/abs/1706.03825",target:"_blank",rel:"noopener noreferrer",children:"SmoothGrad"}),"."]})),t}(e.interpreter),o=Object(a.jsx)("button",{type:"button",className:"btn",style:{margin:"30px 0px"},onClick:this.callInterpretModel(i),children:"Interpret Prediction"}),s="";if(void 0===t)s=this.state.loading?Object(a.jsx)("div",{children:Object(a.jsx)("p",{style:{color:"#7c7c7c"},children:"Loading interpretation..."})}):Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{style:{color:"#7c7c7c"},children:'Press "interpret prediction" to show the interpretation.'}),o]});else{for(var l=[],u=0;u<n.length;u++){var d=t[u],p=n[u],h=r[u],b=sn(d,p),j=new Set(this.getTopKIndices(b,u)),m=this.colorize(b,j),f=u in this.state.topK?this.state.topK[u]:this.state.topK.all,O=Object(a.jsxs)("div",{children:[h,m,Object(a.jsx)(Ge,{multiline:!0,id:on})," ",Object(a.jsx)("input",{type:"range",min:0,max:m.length,step:"1",value:f,className:"slider",onChange:this.handleInputTopKChange(u),style:{padding:"0px",margin:"10px 0px"}}),Object(a.jsx)("br",{}),Object(a.jsxs)("span",{style:{color:"#72BCFF"},children:["Visualizing the top ",f," most important words."]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]},u);l.push(O)}s=Object(a.jsx)("div",{children:l})}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"content",children:c}),s]})}}]),n}(i.a.Component));ln.defaultProps={colormapProps:{colormap:"copper",format:"hex",nshades:20}};h.d.span(rn(),w.a.linkColorStyles(),(function(e){return e.theme.spacing.md}));function un(){var e=Object(p.a)([""]);return un=function(){return e},e}i.a.Component,Object(h.d)(D.a.Panel).attrs({header:"HotFlip Attack"})(un());function dn(){var e=Object(p.a)(["\n  font-weight: 600;\n"]);return dn=function(){return e},e}function pn(){var e=Object(p.a)(["\n  color: #8c9296;\n  margin-right: ",";\n  font-size: 0.8em;\n  min-width: 4em;\n  text-align: right;\n"]);return pn=function(){return e},e}function hn(){var e=Object(p.a)(["\n  color: #8c9296;\n  margin-bottom: ",";\n"]);return hn=function(){return e},e}function bn(){var e=Object(p.a)(["\n  color: #2085bc;\n  cursor: pointer;\n  background: transparent;\n  display: inline-flex;\n  align-items: center;\n  line-height: 1;\n  font-size: 1.15em;\n  border: none;\n  border-bottom: ",";\n"]);return bn=function(){return e},e}function jn(){var e=Object(p.a)(["\n  padding: 0;\n  margin: 0;\n  flex-wrap: wrap;\n  list-style-type: none;\n"]);return jn=function(){return e},e}function mn(){var e=Object(p.a)(["\n  margin: ",";\n"]);return mn=function(){return e},e}function fn(){var e=Object(p.a)(["\n  display: block;\n  width: 100%;\n  font-size: 1.25em;\n  min-height: 100px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  padding: ",";\n"]);return fn=function(){return e},e}function On(){var e=Object(p.a)(["\n  flex: 1 1 50%;\n\n  :first-child {\n    padding-right: ",";\n  }\n\n  :last-child {\n    padding-left: ",";\n  }\n\n  @media(max-width: 500px) {\n    :first-child,\n    :last-child {\n      padding: 0;\n    }\n\n    :first-child {\n      padding: ",";\n    }\n  }\n"]);return On=function(){return e},e}function gn(){var e=Object(p.a)(["\n  display: flex;\n  margin-top: ",";\n\n  @media(max-width: 500px) {\n    display: block;\n  }\n"]);return gn=function(){return e},e}function xn(){var e=Object(p.a)(["\n  padding-left: ",";\n"]);return xn=function(){return e},e}function vn(){var e=Object(p.a)(["\n  color: red;\n"]);return vn=function(){return e},e}function yn(){var e=Object(p.a)(["\n  position: absolute;\n  bottom: 1rem;\n  right: 1rem;\n  display: flex;\n  align-items: center;\n  font-size: 0.8em;\n  color: #8c9296;\n"]);return yn=function(){return e},e}function wn(){var e=Object(p.a)(["\n  background: ",";\n"]);return wn=function(){return e},e}function kn(){var e=Object(p.a)(["\n  color: #232323;\n  flex-grow: 1;\n  font-size: 1em;\n  background: ",";\n  overflow: scroll;\n\n  @media(max-width: 500px) {\n    margin: 0;\n  }\n"]);return kn=function(){return e},e}var _n=h.d.div(kn(),(function(e){return e.theme.palette.background.light})),Sn=h.d.div(wn(),(function(e){return e.theme.palette.common.white})),Cn=h.d.div(yn()),Mn=Object(h.d)(Cn)(vn()),Nn=h.d.div(xn(),(function(e){return e.theme.spacing.xs})),Dn=h.d.div(gn(),(function(e){return e.theme.spacing.sm})),In=Object(h.d)(rt)(On(),(function(e){return e.theme.spacing.md}),(function(e){return e.theme.spacing.md}),(function(e){var t=e.theme;return"0 0 ".concat(t.spacing.md)})),An=Object(h.d)(ot)(fn(),(function(e){return e.theme.spacing.md})),Pn=h.d.li(mn(),(function(e){var t=e.theme;return"0 0 ".concat(t.spacing.xs)})),zn=h.d.ul(jn()),En=h.d.button(bn(),(function(e){var t=e.theme;return"2px solid ".concat(t.palette.common.transparent)})),Tn=Object(h.d)(En)(hn(),(function(e){return e.theme.spacing.xl})),qn=h.d.span(pn(),(function(e){return e.theme.spacing.xs})),Rn=h.d.span(dn()),Ln="AllenNLP is";function Fn(e,t){"history"in window&&window.history.pushState(null,null,"?text="+encodeURIComponent(e+(t||"")))}function Un(){var e=document.location.search.substr(1).split("&").map((function(e){return e.split("=")})).find((function(e){return"text"===e[0]}));return Array.isArray(e)&&2===e.length?decodeURIComponent(e.pop()):null}function Kn(e){return e.replace(/ +$/,"")}var Bn=Object(a.jsx)("span",{children:Object(a.jsx)("p",{children:"Hello"})}),Wn=Object(a.jsx)("span",{children:"Note: The prediction percentages are normalized across these five sequences. The true probabilities are lower."}),Hn=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).currentRequestId=0,a.state={output:Un()||Ln,top_tokens:null,logits:null,probabilities:null,loading:!1,error:!1,model:"345M",interpretData:null,attackData:null},a.choose=a.choose.bind(Object(q.a)(a)),a.debouncedChoose=L.a.debounce(a.choose,1e3),a.setOutput=a.setOutput.bind(Object(q.a)(a)),a}return Object(l.a)(n,[{key:"setOutput",value:function(e){var t=e.target.value;if(t){var n=Kn(t).length>0;this.setState({output:t,top_tokens:null,logits:null,probabilities:null,interpretData:null,attackData:null,loading:n}),this.debouncedChoose()}else this.setState({output:t,top_tokens:null,logits:null,probabilities:null,interpretData:null,attackData:null,loading:!1})}},{key:"createRequestId",value:function(){var e=this.currentRequestId+1;return this.currentRequestId=e,e}},{key:"componentDidMount",value:function(){var e=this;this.choose(),"history"in window&&window.addEventListener("popstate",(function(){var t=Un(),n=!!t,a=t||Ln;e.setState({output:a,loading:!0,top_tokens:null,logits:null,probabilities:null,model:e.state.model},(function(){return e.choose(void 0,n)}))}))}},{key:"choose",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1?arguments[1]:void 0,a=this.state.output;if(0!==Kn(a).length){this.setState({loading:!0,error:!1});var r=void 0===t?void 0:t.replace(/\u21b5/g,"\n");this.createRequestId();"history"in window&&!n&&Fn(this.state.output,r),fetch("/api/time").then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(t){console.error("Error trying to communicate with the API:",t),e.setState({error:!0,loading:!1})}))}else this.setState({loading:!1})}},{key:"render",value:function(){this.state.output;return void 0===this.state.tokens?[]:Array.isArray(this.state.tokens[0])?this.state.tokens[0]:this.state.tokens,Object(a.jsx)(_n,{classname:"model",children:Object(a.jsxs)(Sn,{className:"model__content answer",children:[Object(a.jsx)("h2",{children:Object(a.jsx)("span",{children:"Language Modeling"})}),Object(a.jsx)("span",{children:Bn}),Object(a.jsxs)(Dn,{children:[Object(a.jsxs)(In,{children:[Object(a.jsx)(it,{children:"Sentence:"}),Object(a.jsx)(An,{type:"text",autoSize:{minRows:5,maxRows:10},value:this.state.output,onChange:this.setOutput}),this.state.loading?Object(a.jsxs)(Cn,{children:[Object(a.jsx)("img",{src:"/assets/loading-bars.svg",width:"25",height:"25",alt:"loading"}),Object(a.jsx)(Nn,{children:"Loading"})]}):null,this.state.error?Object(a.jsxs)(Mn,{children:[Object(a.jsx)("span",{role:"img","aria-label":"warning",children:"\ufe0f\u26a0"})," Something went wrong. Please try again."]}):null]}),Object(a.jsxs)(In,{children:[Object(a.jsx)(it,{children:"Predictions:"}),Object(a.jsx)(Gn,{output:this.state.output,index:0,choose:this.choose,logits:this.state.logits,top_tokens:this.state.top_tokens,probabilities:this.state.probabilities,hidden:this.state.loading})]})]}),Object(a.jsx)("span",{children:Wn})]})})}}]),n}(i.a.Component),Gn=function(e){e.output;var t=e.index,n=(e.logits,e.top_tokens),r=e.choose,i=e.probabilities;if(!n)return null;if(n.length<=t)return null;if(i.length<=t)return null;var c=n.map((function(e,t){var n=function(e,t){var n=e.reduce((function(e,t){return e+t}),0),a=e[t]/n;return"".concat((a*=100).toFixed(1),"%")}(i,t),c=e.join("").replace(" ,",",").replace(/\n/g,"\u21b5").replace(/\u0120/g," ").replace(/\u010a/g,"\u21b5"),o="."==c.slice(-1)?c:c.concat(" ...");return Object(a.jsx)(Pn,{children:Object(a.jsxs)(En,{onClick:function(){return r(c)},children:[Object(a.jsx)(qn,{children:n})," ",Object(a.jsx)(Rn,{children:o})]})},"".concat(t,"-").concat(c))})),o=Object(a.jsx)(Pn,{children:"history"in window?Object(a.jsxs)(Tn,{onClick:function(){window.history.back()},children:[Object(a.jsx)(qn,{children:"\u2190"})," ",Object(a.jsx)(Rn,{children:"Undo"})]}):null},"go-back");return Object(a.jsxs)(zn,{children:[c,o]})},Jn={},Xn=[{label:"Code Summarization",iconSrc:C,defaultOpen:!0,models:[{model:"code-summarization",name:"Code Summarization",component:$t}]},{label:"Code Prediction",iconSrc:M,defaultOpen:!0,models:[{model:"code-prediction",name:"Code Prediction",component:Object(j.g)((function(e){return Object(a.jsx)(Hn,Object(N.a)(Object(N.a)({},e),Jn))}))}]}],Vn={};Xn.forEach((function(e){return e.models.forEach((function(e){var t=e.model,n=e.component;return Vn[t]=n}))}));var Qn={};Xn.forEach((function(e){return e.models.forEach((function(e){var t=e.model,n=e.redirects;n&&n.forEach((function(e){return Qn[e]=t}))}))}));var Yn=x.a.BodySmall,$n=v.a.IconMenuItemColumns,Zn=v.a.Item,ea=v.a.SubMenu,ta=m.a.LeftSider,na=y.a.ImgIcon,aa=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).siderWidthExpanded="300px",a.siderWidthCollapsed="80px",a.handleMenuCollapse=function(){a.setState({menuCollapsed:!a.state.menuCollapsed})},a.state={menuCollapsed:!1},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(ta,{width:this.siderWidthExpanded,collapsedWidth:this.siderWidthCollapsed,collapsible:!0,collapsed:this.state.menuCollapsed,onCollapse:this.handleMenuCollapse,children:Object(a.jsx)(v.a,{defaultSelectedKeys:[this.props.redirectedModel],defaultOpenKeys:Xn.filter((function(e){return e.defaultOpen})).map((function(e){return e.label})),mode:"inline",children:Xn.map((function(e){return Object(a.jsx)(ea,{title:Object(a.jsxs)($n,{children:[e.iconSrc&&Object(a.jsx)(na,{src:e.iconSrc}),Object(a.jsx)(Yn,{children:e.label})]}),children:e.models.map((function(e){return Object(a.jsx)(Zn,{children:Object(a.jsx)(S,{to:"/"+e.model,onClick:function(){},children:Object(a.jsx)("span",{children:e.name})})},e.model)}))},e.label)}))})})}}]),n}(i.a.Component),ra=Object(j.g)((function(e){var t=e.history;return Object(r.useEffect)((function(){return t.listen((function(){window.scrollTo(0,0)}))})),null})),ia=n(503),ca=n(54),oa=n.n(ca);function sa(){var e=Object(p.a)(["\n    ","\n"]);return sa=function(){return e},e}var la=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(ua,{children:Object(a.jsx)(ia.a,{indicator:Object(a.jsx)(oa.a,{style:{fontSize:"2rem"}})})})}}]),n}(i.a.Component),ua=h.d.div(sa(),(function(e){var t=e.theme;return"\n        padding: ".concat(t.spacing.xl,";\n        font-size: ").concat(t.typography.bodyJumbo.fontSize,";\n    ")})),da=la;n(494),n(495);function pa(){var e=Object(p.a)(["\n    padding: 0;\n"]);return pa=function(){return e},e}var ha=m.a.Content,ba=m.a.DefaultAppLayoutProvider,ja=(f.a.HeaderColumns,function(e){var t=e.match.params,n=t.model,r=t.slug,i=Qn[n]||n;return Object(a.jsx)(m.a,{bgcolor:"white",children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(aa,{redirectedModel:i}),Object(a.jsxs)(m.a,{children:[Object(a.jsx)(ma,{children:Object(a.jsx)(fa,{model:i,slug:r})}),Object(a.jsx)(g.a,{})]})]})})}),ma=Object(h.d)(ha)(pa()),fa=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(s.a)(this,n),a=t.call(this,e);var r=e.model,i=e.slug;return a.state={slug:i,selectedModel:r,requestData:null,responseData:null},a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.model,n=e.slug;if(t!==this.state.selectedModel||n!==this.state.slug){var a=t!==this.state.selectedModel,r=a?null:this.state.responseData,i=a?null:this.state.requestData;this.setState({selectedModel:t,slug:n,responseData:r,requestData:i})}}},{key:"componentDidMount",value:function(){var e=this,t=this.state,n=t.slug,a=t.responseData;n&&!a&&fetch("/api/permalink/".concat(n)).then((function(e){return e.json()})).then((function(t){var n=t.request_data;e.setState({requestData:n})})).catch((function(e){console.error("Error loading permalink:",e),window.location.replace(window.location.pathname.replace("/".concat(n),""))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.slug,r=t.selectedModel,c=t.requestData,o=t.responseData;console.log(n,r,c,o);return n&&!c?Object(a.jsx)(da,{}):Vn[r]?i.a.createElement(Vn[r],{requestData:c,responseData:o,selectedModel:r,updateData:function(t,n){return e.setState({requestData:t,responseData:n})}}):void 0}}]),n}(i.a.Component),Oa=function(){return Object(a.jsx)(O.a,{children:Object(a.jsx)(b.a,{children:Object(a.jsxs)(ba,{layoutVariant:"app",children:[Object(a.jsx)(ra,{}),Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{exact:!0,path:"/",render:function(){return Object(a.jsx)(j.a,{to:"/code-prediction"})}}),Object(a.jsx)(j.b,{path:"/:model/:slug?",component:ja})]})]})})})};o.a.render(Object(a.jsx)(Oa,{}),document.getElementById("root"))}},[[496,1,2]]]);
//# sourceMappingURL=main.7b59df13.chunk.js.map